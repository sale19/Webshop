<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="index.css">
    <title>Webshop</title>
</head>
<body class="w-100 h-100">

    <body class="w-100 h-100">
        <script>
            window.onload = () => {
                const localStorageUser = localStorage.getItem('user');
                if(!!localStorageUser) {
                    try {
                    const welcomeUser = document.getElementById('welcomeUser');
                const SignOutButton = document.getElementById('SignOut');
                SignOutButton.classList.remove('d-none');
                signedInUser = JSON.parse(localStorageUser);
               
                welcomeUser.innerHTML = `Welcome, ${signedInUser}!`;
                         
        } catch(error) {
            mesage: `${error}`;
            }
    

                    fetch(`http://localhost:8080/proizvodi`)
                .then((response) => {

                return response = response.json()
               
            })

                .then((data) => {
                data.forEach(product => {
                const documentBody = document.getElementById('product-details');
   
                documentBody.innerHTML = '';
  
  
                const rows = document.createElement('div');
    
  
        rows.classList.add('row');
        rows.classList.add('column-3');
  
        rows.innerHTML = `
  
        <img>${product.img}</img>
        `
  
        documentBody.appendChild(rows);
  
  
        const rows2 = document.createElement('div');
    
        rows2.classList.add('column-3');


    

    rows2.innerHTML = `
  
      <p>${product.name}</p>
      <h1>${product.specification}</h1>
      <h4>${product.price} KM</h4>
      <div>
      <input id="quantity" type="number" value="1" min="1" class="align-bottom d-inline-block">
      <button onclick="addProductToCart()" href="#" id="add-to-cart" class="btn btn-dark">Add To Cart</button>
      </div>
      <h3>Product Details</h3>
      <p>${product.description}</p>
    `
    documentBody.appendChild(rows2);

    const button = document.getElementById('add-to-cart');
    button.classList.remove('disabled');
            });
        });
    }
}

function addProductToCart() {
      alert("Successfully added product to cart!");
    }

function signOutUser() {
    const SignOutButton = document.getElementById('SignOut');
        localStorage.removeItem('user');
        window.location.href = 'details.html';
    {
        
         }
    }
                </script>
        <div class="header">
            <div class="container">
        <div class="navbar">
            <div>
        <img class="logo" src="./img/Logo.png">
            </div>
            <nav>
                <ul id="menuList">
                    <li><a class="navbar-link" href="/index.html#home-section">Home</a></li>
                    <li><a class="navbar-link" href="/index.html#shop-section">Shop</a></li>
                    <li><a class="navbar-link" href="./login.html">Account</a></li>
                    <li><a class="navbar-link" href="#about-section">About</a></li>
                </ul>
            </nav>

    <svg class="cart-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />
      </svg>
      
        <svg id="menuIcon" onclick="displaySmallScreenMenu()" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
          </svg>
        </div>
        <div>
            
        <button id="SignOut" onclick="signOutUser()" class="btn btn-dark d-flex justify-content-end align-items-end float-end d-none">Sign Out</button>
       </div>
        <h4 class="text-white" id="welcomeUser"></h4>
    
            <div class="product-details-container">
                <div class="rows" id="product-details">
                  
                       
                        <input id="quantity" type="number" value="1" min="1" class="align-bottom">
                        <button href="" class="btn btn bg-primary">Add To Cart</button>
            </div>

            

        </div>
        </div>
        </div>
        </div>


<div id="about-section" class="footer p-4">
    <div class="footer-container">
    <div class="footer-rows">
        <div class="footer-column-1 p-2">
                <h5><a href="index.html#home-section">Home</a></h5>
                <br>
                <h5><a href="index.html#shop-section">Shop</a></h5>
                <br>
                <h5><a href="login.html">Account</a></h5>
        </div>
            <div class="footer-column-2">
                <h4>Powered by <strong>Bogdanović Saša</strong></h4>
                <br>
                <h4>atrus2012@gmail.com</h4>
                <br>
                <h4><a href="https://github.com/sale19/Webshop">GITHUB Link</a></h4>
            </div>
</div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="toggle_menu.js" defer></script>
<script src="product_details_fetchandrender.js" defer></script>
</body>
</html>